## [19장 - 프로토타입]

### _객체지향 프로그래밍_

- 독립적인 객체의 집합으로 프로그램을 표현하려는 프로그래밍 패러다임
- 속성
- 다양한 속성 중에서 프로그램에 필요한 속성만 간추려 내어 표현 => 추상화
- 속성을 통해 여러 개의 값을 하나의 단위로 구성한 복합적인 자료구조 => 객체
- 객체: 상태 데이터와 동작을 하나의 논리적인 단위로 묶은 복합적인 자료구조
- 상태 데이터 (프로퍼티), 동작 (메서드)

### _상속과 프로토타입_

- 상속: 어떤 객체의 프로퍼티, 메서드를 다른 객체가 상속받아 그대로 사용할 수 있는 것
- JS는 프로토타입 기반으로 상속 구현
- 상속에 의한 메서드 공유
- 코드의 재사용

### _프로토타입 객체_

- 객체 간 상속을 구현하기 위해 사용됨
- 객체의 상위(부모) 객체 역할을 하는 객체로서 다른 객체에 공유 프로퍼티 제공
- 모든 객체는 하나의 프로토타입 가짐, 모든 프로토타입은 생성자 함수와 연결됨
- `__proto__` 접근자 프로퍼티
  - 모든 객체는 `__proto__` 접근자 프로퍼티를 통해 자신의 프로토타입 <br/>
    [[Prototype]] 내부 슬롯에 간접 접근 가능
  - `__proto__`는 접근자 프로퍼티다
    - 내부 슬롯은 프로퍼티가 아님 (직접 접근 불가)
  - `__proto__` 접근자 프로퍼티는 상속을 통해 사용됨
    - 객체가 직접 소유하는 프로퍼티가 아니라 Object.prototype 프로퍼티임
  - `__proto__` 접근자 프로퍼티를 통해 프로토타입에 접근하는 이유
    - 상호 참조에 의해 프로토타입 체인 생성 방지 (순환 참조 -> 무한 루프)
    - 프로토타입 체인은 단방향 링크드 리스트로 구현
  - `__proto__` 접근자 프로퍼티를 코드 내에서 직접 사용하는 것은 권장 X
    - 모든 객체가 `__proto__` 접근자 프로퍼티 사용할 수 있는 것은 아님
    - 접근자 프로퍼티 대신 프로토타입 참조 취득 원하면 => Object.getPrototypeof 메서드 사용
- 함수 객체의 prototype 프로퍼티
  - 함수 객체만이 소유하는 prototype 프로퍼티 <br/>
    => 생성자 함수가 생성할 인스턴스의 프로토타입
  - 모든 객체가 가지고 있는 `__proto__` 접근자 프로퍼티와 <br/>
    함수 객체만이 가지고 있는 prototype 프로퍼티는 동일한 프로퍼티 가리킴
- 프로토타입의 constructor 프로퍼티와 생성자 함수
  - 모든 프로토타입은 constructor 프로퍼티 가짐

### _리터럴 표기법에 의해 생성된 객체의 생성자 함수와 프로토타입_

- 객체 리터럴에 의해 생성된 객체는 Object 생성자 함수가 생성한 객체가 아님
- 프로토타입과 생성자 함수는 단독으로 존재할 수 없고 항상 쌍으로 존재

### _프로토타입의 생성 시점_

- 모든 객체는 생성자 함수와 연결되어 있음
- 프로토타입은 생성자 함수가 생성되는 시점에 더불어 생성됨
- 사용자 정의 생성자 함수와 프로토타입 생성 시점
  - 생성자 함수로서 호출할 수 있는 함수 <br/>
    constructor는 함수 정의가 평가되어 함수 객체를 생성하는 시점에 <br/>
    프로토타입도 더불어 생성됨
  - non-constructor는 프로토타입 생성되지 않음
  - 사용자 정의 생성자 함수는 자신이 평가되어 함수 객체로 생성되는 시점에 <br/>
    프로토타입도 더불어 생성되고 생성된 프로토타입의 프로토타입은 언제나 <br/>
    Object.prototype
- 빌트인 생성자 함수와 프로토타입 생성 시점
  - 빌트인 생성자 함수가 생성되는 시점에 프로토타입이 생성됨
  - 빌트인 객체인 Object는 전역 객체 window의 프로퍼티
  - 생성자 함수 또는 리터럴 표기법으로 객체를 생성하면 프로토타입은 <br/>
    생성된 객체의 [[Prototype]] 내부 슬롯에 할당됨

### _객체 생성 방식과 프로토타입의 결정_

- 객체 생성 방식 (추상 연산에 의해 생성됨)
  - 객체 리터럴
  - Object 생성자 함수
  - 생성자 함수
  - Object.create 메서드
  - 클래스(ES6)
- 객체 리터럴에 의해 생성된 객체의 프로토타입
  - Object.prototype을 프로토타입으로 가짐
  - 객체 리터럴 내부에 프로퍼티 추가
- Object 생성자 함수에 의해 생성된 객체의 프로토타입
  - 빈 객체 생성 이후 프로퍼티 추가
- 생성자 함수에 의해 생성된 객체의 프로토타입
  - 사용자 정의 생성자 함수와 더불어 생성된 프로토타입의 프로퍼티는 <br/>
    constructor 뿐
  - 프로토타입은 객체다

### _프로토타입 체인_

- 프로토타입의 프로토타입은 언제나 Object.prototype (체인의 종점)
- JS가 OOP의 상속을 구현하는 메커니즘
- 상속과 프로퍼티 검색을 위한 메커니즘
- 스코프 체인은 식별자 검색을 위한 메커니즘

### _오버라이딩과 프로퍼티 섀도잉_

- 프로토타입이 소유한 프로퍼티 => 프로토타입 프로퍼티
- 인스턴스가 소유한 프로퍼티 => 인스턴스 프로퍼티
- 상속관계에 의해 프로퍼티가 가려지는 현상 => 프로퍼티 섀도잉
- 하위 객체를 통해 프로토타입에 get 액세스는 허용, set 액세스는 허용 X
- 프토토타입에 직접 접근해야 함 (체인으로 접근 x)

### _프로토타입의 교체_

- 프로토타입은 생성자 함수 또는 인스턴스에 의해 교체 가능
- 생성자 함수에 의한 프로토타입의 교체
  - 프로토타입 교체시 constructor 프로퍼티와 생성자 함수 간의 연결이 파괴됨
  - 되살리기 가능
  - 생성자 함수의 prototype 프로퍼티가 교체된 프로토타입을 가리킴
- 인스턴스에 의한 프로토타입의 교체
  - 생성자 함수의 prototype 프로퍼티에 다른 임의의 객체를 바인딩 <br/>
    => 미래에 생성할 인스턴스의 프로토타입 교체
  - 생성자 함수의 prototype 프로퍼티가 교체된 프로토타입을 가리키지 않음

### _instanceof 연산자_

- 좌변에 객체를 가리키는 식별자, 우변에 생성자 함수를 가리키는 식별자
- 생성자 함수의 prototype에 바인딩된 객체가 프로토타입 체인 상에 존재하는지 확인

### _직접 상속_

- Object.create에 의한 직접 상속
  - new 연산자 없이도 객체 생성 가능
  - 프로토타입 지정하면서 객체 생성 가능
  - 객체 리터럴에 의해 생성된 객체도 상속 받을 수 있음
- 객체 리터럴 내부에서 `__proto__`에 의한 직접 상속
  - ES6 직접 상속 구현 가능

### _정적 프로퍼티/메서드_

- 생성자 함수로 인스턴스 생성하지 않아도 참조/호출 가능한 프로퍼티/메서드
- 인스턴스로 참조/호출할 수 있는 프로퍼티/메서드는 프로토타입 체인 상에 존재해야 함
- `Object.create()`는 정적 메서드
- 프로토타입 메서드 호출 위해서는 인스턴스 생성해야 하지만 <br/>
  정적 메서드는 인스턴스를 생성하지 않아도 호출 가능

### _프로퍼티 존재 확인_

- in 연산자
  - 객체 내에 특정 프로퍼티가 존재하는지 여부 확인
  - Reflect.has 메서드
- Object.prototype.hasOwnProperty 메서드
  - 객체에 특정 프로퍼티가 존재하는지 확인
  - 상속받은 프로토타입의 프로퍼티 키는 false return

### _프로퍼티 열거_

- for in 문
  - 객체의 모든 프로퍼티 순회하면서 열거
  - 객체의 프로토타입 체인 상에 존재하는 모든 프로토타입의 프로퍼티 중에서 <br/>
    프로토타입 어트리뷰트 [[Enumberable]]의 값이 true인 프로퍼티 순회하면서 열거
  - 프로퍼티 키가 심벌인 프로퍼티는 열거 안함
  - 프로퍼티 열거 시 순서 보장 안함 (모던 브라우저에서 대부분 순서 보장)
  - 배열에는 for in 보다 for문이나 for of, forEach() 권장
- Object.keys/values/entries 메서드
  - Object.keys() 객체 자신의 열거 가능한 프로퍼티 키를 배열로 반환
  - Object.values() 객체 자신의 열거 가능한 프로퍼티 값을 배열로 반환
  - Object.entries() 객체 자신의 열거 가능한 프로퍼티 키와 값의 쌍의 배열을 배열에 담아 반환

#

## [Note]

- JS는 멀티 패러다임 프로그래밍 언어
- 프로토타입 기반의 객체지향 프로그래밍 언어
- JS를 이루고 있는 거의 모든 것이 객체

#

[Reference](https://wikibook.co.kr/mjs/)
